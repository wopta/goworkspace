{
	"processes": [
		{
			"name": "emit",
			"defaultStart": "init",
			"globalData": [
				{
					"name": "policy",
					"type": "policy"
				},
				{
					"name": "product",
					"type": "product"
				},
				{
					"name": "node",
					"type": "networkNode"
				},
				{
					"name": "addresses",
					"type": "addresses"
				}
			],
			"description": "Emit process",
			"activities": [
				{
					"name": "init",
					"callEndIfStop": false,
					"handlerless": true,
					"gateways": [
						{
							"nextActivities": [
								"setProposalData"
							],
							"decision": "policy.channel!=`mga`"
						}
					]
				},
				{
					"name": "setProposalData",
					"gateways": [
						{
							"nextActivities": [
								"emitData"
							]
						}
					]
				},
				{
					"name": "emitData",
					"gateways": [
						{
							"nextActivities": [
								"sign"
							]
						}
					]
				},
				{
					"name": "sign",
					"gateways": [
						{
							"nextActivities": [
								"sendMailSign"
							],
							"decision": "product.flow==`remittance_mga`"
						},
						{
							"nextActivities": [
								"pay"
							]
						}
					]
				},
				{
					"name": "pay",
					"gateways": [
						{
							"nextActivities": [
								"sendEmitProposalMail"
							]
						}
					]
				},
				{
					"name": "sendEmitProposalMail",
					"gateways": [
						{
							"nextActivities": [
								"sendMailSign"
							]
						}
					]
				},
				{
					"name": "sendMailSign",
					"gateways": [
						{
							"nextActivities": [
								"setAdvice"
							],
							"decision": "product.flow==`remittance_mga`"
						}
					]
				},
				{
					"name": "setAdvice",
					"gateways": [
						{
							"nextActivities": [
								"putUser"
							]
						}
					]
				},
				{
					"name": "putUser"
				}
			]
		},
		{
			"name": "lead",
			"defaultStart": "init",
			"globalData": [
				{
					"name": "policy",
					"type": "policy"
				},
				{
					"name": "product",
					"type": "product"
				},
				{
					"name": "addresses",
					"type": "addresses"
				}
			],
			"description": "Lead process for e-commerce",
			"activities": [
				{
					"name": "init",
					"callEndIfStop": false,
					"handlerless": true,
					"gateways": [
						{
							"nextActivities": [
								"setLeadData"
							]
						}
					]
				},
				{
					"name": "setLeadData",
					"gateways": [
						{
							"nextActivities": [
								"sendLeadMail"
							],
							"decision": "policy.channel!=`mga` && policy.channel!=`network`"
						}
					]
				},
				{
					"name": "sendLeadMail",
					"gateways": [
						{
							"nextActivities": [
								"emitData"
							],
							"decision": "policy.channel!=`e-commerce`"
						}
					]
				},
				{
					"name": "emitData",
					"gateways": [
						{
							"nextActivities": [
								"sign"
							]
						}
					]
				},
				{
					"name": "sign",
					"gateways": [
						{
							"nextActivities": [
								"pay"
							]
						}
					]
				},
				{
					"name": "pay",
					"gateways": [
						{
							"nextActivities": [
								"sendEmitProposalMail"
							]
						}
					]
				},
				{
					"name": "sendEmitProposalMail",
					"gateways": [
						{
							"nextActivities": [
								"sendMailSign"
							]
						}
					]
				},
				{
					"name": "sendMailSign"
				}
			]
		},
		{
			"name": "pay",
			"globalData": [
				{
					"name": "policy",
					"type": "policy"
				},
				{
					"name": "paymentInfo",
					"type": "paymentInfo"
				},
				{
					"name": "product",
					"type": "product"
				},
				{
					"name": "addresses",
					"type": "addresses"
				}
			],
			"description": "Payiment process",
			"defaultStart": "init",
			"activities": [
				{
					"name": "init",
					"callEndIfStop": false,
					"handlerless": true,
					"gateways": [
						{
							"nextActivities": [
								"updatePolicy"
							],
							"decision": "product.flow!=`remittance_mga`"
						}
					]
				},
				{
					"name": "updatePolicy",
					"gateways": [
						{
							"nextActivities": [
								"payTransaction"
							]
						}
					]
				},
				{
					"name": "payTransaction",
					"gateways": [
						{
							"nextActivities": [
								"sign"
							],
							"decision": "policy.channel!=`mga` && policy.channel!=`network`&& policy.channel!=`e-commerce`"
						}
					]
				},
				{
					"name": "sign"
				}
			]
		},
		{
			"name": "proposal",
			"globalData": [
				{
					"name": "policy",
					"type": "policy"
				},
				{
					"name": "product",
					"type": "product"
				}
			],
			"description": "Proposal process",
			"defaultStart": "init",
			"activities": [
				{
					"name": "init",
					"callEndIfStop": false,
					"handlerless": true,
					"gateways": [
						{
							"nextActivities": [
								"setProposalData"
							],
							"decision": "policy.channel!=`e-commerce`"
						}
					]
				},
				{
					"name": "setProposalData",
					"recover": "",
					"gateways": [
						{
							"nextActivities": [
								"sendProposalMail"
							],
							"decision": "policy.channel==`network`"
						}
					]
				},
				{
					"name": "sendProposalMail"
				}
			]
		},
		{
			"name": "requestApproval",
			"globalData": [
				{
					"name": "policy",
					"type": "policy"
				},
				{
					"name": "product",
					"type": "product"
				}
			],
			"description": "Request approcal process",
			"defaultStart": "init",
			"activities": [
				{
					"name": "init",
					"handlerless": true,
					"callEndIfStop": false,
					"gateways": [
						{
							"nextActivities": [
								"setRequestApprovalData"
							],
							"decision": "policy.channel==`network`"
						}
					]
				},
				{
					"name": "setRequestApprovalData",
					"gateways": [
						{
							"nextActivities": [
								"sendRequestApprovalMail"
							]
						}
					]
				},
				{
					"name": "sendRequestApprovalMail"
				}
			]
		},
		{
			"name": "sign",
			"globalData": [
				{
					"name": "policy",
					"type": "policy"
				},
				{
					"name": "product",
					"type": "product"
				},
				{
					"name": "addresses",
					"type": "addresses"
				}
			],
			"description": "Sign process",
			"defaultStart": "init",
			"activities": [
				{
					"name": "init",
					"handlerless": true,
					"callEndIfStop": false,
					"gateways": [
						{
							"nextActivities": [
								"setSign"
							],
							"decision": "product.flow==`remittance_mga`"
						},
						{
							"nextActivities": [
								"fillAttachments"
							]
						}
					]
				},
				{
					"name": "fillAttachments",
					"gateways": [
						{
							"nextActivities": [
								"setSign"
							]
						}
					]
				},
				{
					"name": "setSign",
					"gateways": [
						{
							"nextActivities": [
								"setToPay"
							],
							"decision": "product.flow!=`remittance_mga`"
						},
						{
							"nextActivities": [
								"addContract"
							]
						}
					]
				},
				{
					"name": "setToPay",
					"gateways": [
						{
							"nextActivities": [
								"sendMailPay"
							],
							"decision": "policy.channel!=`mga`"
						}
					]
				},
				{
					"name": "sendMailPay"
				},
				{
					"name": "addContract",
					"gateways": [
						{
							"nextActivities": [
								"sendMailContract"
							],
							"decision": "product.flow==`remittance_mga`"
						}
					]
				},
				{
					"name": "sendMailContract"
				}
			]
		},
		{
			"name": "acceptance",
			"description": "approve process -> approved or rejected",
			"globalData": [
				{
					"name": "policy",
					"type": "policy"
				},
				{
					"name": "node",
					"type": "networkNode"
				},
				{
					"name": "addresses",
					"type": "addresses"
				},
				{
					"name": "acceptanceInfo",
					"type": "acceptanceInfo"
				}
			],
			"defaultStart": "init",
			"activities": [
				{
					"name": "init",
					"handlerless": true,
					"inputData": [],
					"gateways": [
						{
							"nextActivities": [
								"approved"
							],
							"decision": "acceptanceInfo.action==`Approved`"
						},
						{
							"nextActivities": [
								"rejected"
							],
							"decision": "acceptanceInfo.action==`Rejected`"
						}
					]
				},
				{
					"name": "rejected",
					"gateways": [
						{
							"nextActivities": [
								"sendAcceptanceMail"
							]
						}
					]
				},
				{
					"name": "approved",
					"gateways": [
						{
							"nextActivities": [
								"sendAcceptanceMail"
							]
						}
					]
				},
				{
					"name": "sendAcceptanceMail"
				}
			]
		}
	]
}
